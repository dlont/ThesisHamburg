The detector response to the particles traversing the detector volume was simulated using the \mozart program (based on \geant 3.21~\cite{tech:cern-dd-ee-84-1}). In \mozart the propagation of particles in the detector volume including motion in the magnetic field, multiple scattering, energy losses, particle decays and particle showers was implemented. The four-momentum components of the initial- and final-state particles used as an input were generated by one of the general-purpose event generators e.g. \lepto or \ariadne (see Section~\ref{sec:mcmodels}). These and other event generators had a common front-end interface program called \amadeus. The behaviour of the trigger system was simulated with the \zgana program. The \zgana program keeps the event even if it was not accepted by the trigger chain, thus allowing estimation of the trigger efficiency using the simulated events. The output of \zgana was compatible with the format for the raw data from the detector and can be subsequently analysed by the the same programs. The reconstruction of the simulated and real events was provided by the \zephyr program. The output of \zephyr was stored in \adamo format. The information specific to each program was supplied through the set of steering and \gaf files containing, for example, the magnetic field map or the shape of the distribution of the longitudinal component of the interaction-vertex position. All programs keep track of the generated particles at each step of the simulation process, thus providing access to the generator level.

The high-level generic routines for the event reconstruction relevant in most of the analysis were collected in the \orange/\phantom library. The analysis ntuples in \paw or \root format containing the variables necessary for the analysis can be produced using the \orange or EAZE jobs. These ntuples can be subsequently analysed by means of user-specific C++ or FORTRAN codes. 

In this thesis the v08b version of the Common Ntuples was used for both data and MC. The diagram of the data flow in the simulation process is demonstrated in Figure~\ref{fig:detectorsimulation}.

\begin{figure}[p]
	\centering
		\includegraphics[width=\linewidth]{./Figures/detectorsimulation.png}
	\caption{The \zeus detector simulation data flow.}
	\label{fig:detectorsimulation}
\end{figure}
